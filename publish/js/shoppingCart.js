"use strict";var shoppingCart=JSON.parse(localStorage.getItem("shoppingCart"))||[];console.log(shoppingCart);var table=document.querySelector("table"),sum=document.getElementById("sum");function render(){var t=shoppingCart.every(function(t){return t.isChecked});console.log(t);var e=' <thead>\n                    <tr>\n                        <th><input class="allCheck" type="checkbox" '+(t?"checked":"")+' >全选</th>\n                        <th scope="col">商品ID</th>\n                        <th scope="col">商品名称</th>\n                        <th scope="col">商品价格</th>\n                        <th scope="col">数量</th>\n                        <th scope="col">操作</th>\n                        <th scope="col">删除</th>\n                    </tr>\n                </thead>\n                <tbody >';shoppingCart.forEach(function(t){e+='\n                    <tr>\n                        <th scope="row"><input data-id="'+t.goods_id+'" class="singleCheck" '+(t.isChecked?"checked":"")+' type="checkbox"/></th>\n                        <th scope="row">'+t.goods_id+'</th>\n                        <td title="'+t.goods_name+'"><span style="display: inline-block;width: 300px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;">'+t.goods_name+"</span></td>\n                        <td>"+t.goods_price+"</td>\n                        <td>"+t.count+'</td>\n                        <td><button type="button" class="btn increase" data-id="'+t.goods_id+'">+</button ><button type="button" data-id="'+t.goods_id+'" class="btn decrease">-</button></td>\n                        <td class="d-flex justify-content-md-center"><button type="button" class="close" aria-label="关闭">\n                            <span class="del" aria-hidden="true" data-id="'+t.goods_id+'" >&times;</span>\n                          </button></td>\n                    </tr>\n                '}),e+="</tbody>",shoppingCart.length||(e="<h1 style='margin-top:30px;'><i class='iconfont icon-che1'></i><a href='./list.html'>您的购物车空空如也，请去挑选一些商品吧！！！</a></h1>"),table.innerHTML=e}function checkin(){var e=0;shoppingCart.forEach(function(t){t.isChecked&&(e+=t.goods_price*t.count)}),sum.innerHTML="￥"+e,shoppingCart.length||(sum.parentNode.style.display="none")}function update(){localStorage.setItem("shoppingCart",JSON.stringify(shoppingCart))}render(),checkin(),table.onclick=function(e){if("allCheck"===e.target.className)return shoppingCart.forEach(function(t){t.isChecked=e.target.checked}),render(),void checkin();if("singleCheck"===e.target.className){var n=e.target.getAttribute("data-id"),t=shoppingCart.find(function(t){return t.goods_id===n});return console.log(t),t.isChecked=e.target.checked,render(),checkin(),void update()}if(e.target.className.includes("increase")){n=e.target.getAttribute("data-id");return(t=shoppingCart.find(function(t){return t.goods_id===n})).count++,render(),checkin(),void update()}if(e.target.className.includes("decrease")){n=e.target.getAttribute("data-id");return(t=shoppingCart.find(function(t){return t.goods_id===n})).count--,t.count<=0&&(t.count=0),render(),checkin(),void update()}if("del"===e.target.className){n=e.target.getAttribute("data-id");var o=shoppingCart.findIndex(function(t){return t.goods_id===n});return shoppingCart.splice(o,1),render(),checkin(),void update()}};